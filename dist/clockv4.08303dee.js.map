{"version":3,"sources":["js/clockv4.js"],"names":["countdown","endTime","now","Date","hasAdvanced","manualNavigation","timePeriodMapping","startTime","periodName","lunchTimings","currentPeriodIndex","getCurrentPeriodIndex","i","length","_timePeriodMapping$i$2","_slicedToArray","split","map","Number","endHours","endMinutes","potentialEndTime","setHours","to12HourFormat","timeStr","_timeStr$split$map2","hours","minutes","concat","initializeCountdown","document","getElementById","isSchoolHours","updatePeriod","tick","_Date","_Date2","firstStartTime","apply","_toConsumableArray","lastEndTime","slice","window","advanceToNextPeriod","advanceToPreviousPeriod","selectedLunchType","currentPeriodMapping","realCurrentPeriodIndex","_currentPeriodMapping2","lunchStartHours","lunchStartMinutes","lunchStartTime","_currentPeriodMapping4","lunchEndHours","lunchEndMinutes","_currentPeriodMapping6","_currentPeriodMapping8","startHours","startMinutes","textContent","_currentPeriodMapping10","periodStartTime","lunchButtons","classList","remove","add","console","log","updateProgressBar","setDate","getDate","gallery","innerHTML","dot","createElement","className","appendChild","periodEndTime","progressPercentage","style","width","updateClock","timeRemaining","_timePeriodMapping$0$2","firstStartHours","firstStartMinutes","Math","floor","seconds","_currentPeriodMapping12","requestAnimationFrame","chooseLunch","lunchType","buttonElement","allLunchButtons","querySelectorAll","contains","forEach","btn","addEventListener"],"mappings":"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","file":"clockv4.08303dee.js","sourceRoot":"..","sourcesContent":["/**\r\n * @fileoverview This file updates the current time as a simple countdown.\r\n * @version August 25, 2023\r\n * @authors Maxime Hendryx-Parker\r\n **/\r\n\r\nvar countdown;\r\nvar now = new Date();\r\nvar endTime;\r\nlet hasAdvanced = false;  // Add this flag at the top of the file to track whether we have already advanced the period\r\nlet manualNavigation = false; // Flag to indicate manual navigation\r\n\r\nvar timePeriodMapping = [\r\n    { startTime: \"08:00\", endTime: \"08:30\", periodName: \"Passing Period\" },\r\n    { startTime: \"08:30\", endTime: \"09:53\", periodName: \"Period 1\" },\r\n    { startTime: \"09:53\", endTime: \"10:01\", periodName: \"Passing Period\" },\r\n    { startTime: \"10:01\", endTime: \"11:24\", periodName: \"Period 2\" },\r\n    { startTime: \"11:24\", endTime: \"13:24\", periodName: \"Period 3 & Lunch\" },\r\n    { startTime: \"13:24\", endTime: \"13:32\", periodName: \"Passing Period\" },\r\n    { startTime: \"13:32\", endTime: \"15:00\", periodName: \"Period 4\" },\r\n];\r\n\r\nvar lunchTimings = {\r\n    \"A\": { startTime: \"11:24\", endTime: \"11:54\", periodName: \"A Lunch\" },\r\n    \"B\": { startTime: \"11:54\", endTime: \"12:24\", periodName: \"B Lunch\" },\r\n    \"C\": { startTime: \"12:24\", endTime: \"12:54\", periodName: \"C Lunch\" },\r\n    \"D\": { startTime: \"12:54\", endTime: \"13:24\", periodName: \"D Lunch\" },\r\n};\r\n\r\n\r\n// At the top of the file\r\nlet currentPeriodIndex = getCurrentPeriodIndex();\r\n\r\nfunction getCurrentPeriodIndex() {\r\n    for (let i = 0; i < timePeriodMapping.length; i++) {\r\n        let [endHours, endMinutes] = timePeriodMapping[i].endTime.split(\":\").map(Number);\r\n        let potentialEndTime = new Date(now);\r\n        potentialEndTime.setHours(endHours, endMinutes, 0, 0);\r\n\r\n        if (now < potentialEndTime) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1; // Return 0 if outside of all periods\r\n}\r\n\r\nfunction to12HourFormat(timeStr) {\r\n    let [hours, minutes] = timeStr.split(\":\").map(Number);\r\n    hours = hours % 12 || 12; // Convert 0 hours to 12 for 12 AM\r\n    minutes = minutes < 10 ? '0' + minutes : minutes;\r\n    return `${hours}:${minutes}`;\r\n}\r\n\r\nwindow.advanceToNextPeriod = function() {\r\n    manualNavigation = true;\r\n    if (currentPeriodIndex < timePeriodMapping.length - 1) {\r\n        currentPeriodIndex++;\r\n        updatePeriod();\r\n    } else if (currentPeriodIndex === timePeriodMapping.length - 1) {\r\n        currentPeriodIndex = -1;\r\n        updatePeriod();\r\n    }\r\n}\r\n\r\nwindow.advanceToPreviousPeriod = function() {\r\n    manualNavigation = true;\r\n    if (currentPeriodIndex > -1) {\r\n        currentPeriodIndex--;\r\n        updatePeriod();\r\n    } else if (currentPeriodIndex === -1) {\r\n        currentPeriodIndex = timePeriodMapping.length-1;\r\n        updatePeriod()\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Initialize the countdown variables and start the tick function.\r\n */\r\nfunction initializeCountdown() {\r\n    countdown = document.getElementById(\"countdown__timer\");\r\n    now = new Date();\r\n\r\n    if (!isSchoolHours() || getCurrentPeriodIndex() === -1) {\r\n        manualNavigation = true\r\n    }\r\n\r\n    updatePeriod();\r\n    tick();\r\n}\r\n\r\nfunction isSchoolHours() {\r\n    let firstStartTime = new Date().setHours(...timePeriodMapping[0].startTime.split(\":\"));\r\n    let lastEndTime = new Date().setHours(...timePeriodMapping.slice(-1)[0].endTime.split(\":\"));\r\n    return (new Date >= firstStartTime && new Date <= lastEndTime);\r\n}\r\n\r\nlet selectedLunchType = null; // This will store the type of lunch selected, if any\r\n\r\nfunction updatePeriod() {\r\n    let currentPeriodMapping = timePeriodMapping[currentPeriodIndex];\r\n\r\n    let realCurrentPeriodIndex = getCurrentPeriodIndex();\r\n\r\n    if (currentPeriodMapping) {\r\n        // If current period is \"Period 3 & Lunch\"\r\n        if (currentPeriodMapping.periodName === \"Period 3 & Lunch\" && selectedLunchType) {\r\n            currentPeriodMapping = lunchTimings[selectedLunchType];\r\n\r\n            let [lunchStartHours, lunchStartMinutes] = currentPeriodMapping.startTime.split(\":\").map(Number);\r\n            let lunchStartTime = new Date(now);\r\n            lunchStartTime.setHours(lunchStartHours, lunchStartMinutes, 0, 0);\r\n\r\n            if (now < lunchStartTime) {\r\n                // If the selected lunch has not started, set endTime to its startTime\r\n                endTime = lunchStartTime;\r\n            } else {\r\n                // If the selected lunch has started, set endTime to its actual endTime\r\n                let [lunchEndHours, lunchEndMinutes] = currentPeriodMapping.endTime.split(\":\").map(Number);\r\n                endTime = new Date(now);\r\n                endTime.setHours(lunchEndHours, lunchEndMinutes, 0, 0);\r\n            }\r\n        } else {\r\n            let [endHours, endMinutes] = currentPeriodMapping.endTime.split(\":\").map(Number);\r\n            let [startHours, startMinutes] = currentPeriodMapping.startTime.split(\":\").map(Number);\r\n\r\n            if (realCurrentPeriodIndex !== currentPeriodIndex) {\r\n                // If the period being looked at is not the current period, set endTime to startTime\r\n                endTime = new Date(now);\r\n                endTime.setHours(startHours, startMinutes, 0, 0);\r\n            } else {\r\n                // Otherwise, set endTime to the actual end time of the period\r\n                endTime = new Date(now);\r\n                endTime.setHours(endHours, endMinutes, 0, 0);\r\n            }\r\n        }\r\n\r\n        document.getElementById(\"period__header\").textContent = currentPeriodMapping.periodName;\r\n        document.getElementById(\"period__time\").textContent = `${to12HourFormat(currentPeriodMapping.startTime)} - ${to12HourFormat(currentPeriodMapping.endTime)}`;\r\n\r\n        let [startHours, startMinutes] = currentPeriodMapping.startTime.split(\":\").map(Number);\r\n        let periodStartTime = new Date(now);\r\n        periodStartTime.setHours(startHours, startMinutes, 0, 0);\r\n\r\n        let lunchButtons = document.getElementById(\"lunch\");\r\n        if (currentPeriodMapping.periodName === \"Period 3 & Lunch\" || currentPeriodMapping === lunchTimings[selectedLunchType]) {\r\n            lunchButtons.classList.remove(\"hidden\");\r\n        } else {\r\n            lunchButtons.classList.add(\"hidden\");\r\n        }\r\n\r\n        console.log(currentPeriodMapping.periodName);\r\n\r\n        updateProgressBar(periodStartTime, endTime);\r\n    } else {\r\n        endTime = new Date(now);\r\n        document.getElementById(\"period__header\").textContent = \"Not School Hours\";\r\n        document.getElementById(\"period__time\").textContent = to12HourFormat(timePeriodMapping[timePeriodMapping.length-1].endTime) + \" - \" + to12HourFormat(timePeriodMapping[0].startTime);\r\n    }\r\n\r\n    if (manualNavigation) {\r\n        if (now > endTime) {\r\n            endTime.setDate(endTime.getDate() + 1);\r\n        }\r\n        manualNavigation = false; // Reset the flag\r\n    }\r\n\r\n    console.log(\"sup\")\r\n\r\n    // Update gallery dots\r\n    let gallery = document.getElementById(\"period__gallery\");\r\n    gallery.innerHTML = \"\"; // Clear existing dots\r\n\r\n    for (let i = 0; i < timePeriodMapping.length; i++) {\r\n        let dot = document.createElement(\"div\");\r\n        dot.className = \"gallery-dot\";\r\n\r\n        // Mark the active dot based on the current period\r\n        if (i === currentPeriodIndex) {\r\n            dot.classList.add(\"active\");\r\n        }\r\n\r\n        gallery.appendChild(dot);\r\n    }\r\n}\r\n\r\nfunction updateProgressBar(periodStartTime, periodEndTime) {\r\n    const totalDuration = periodEndTime - periodStartTime;\r\n    const elapsedDuration = now - periodStartTime;\r\n\r\n    // Calculate the percentage of time elapsed\r\n    const progressPercentage = (elapsedDuration / totalDuration) * 100;\r\n\r\n    // Set the width of the progress bar\r\n    document.getElementById(\"countdown__progress\").style.width = `${progressPercentage}%`;\r\n}\r\n\r\nwindow.chooseLunch = function(lunchType, buttonElement) {\r\n    // Get all lunch buttons\r\n    let allLunchButtons = document.querySelectorAll(\"#lunch__choose .container\");\r\n\r\n    // If the button clicked is already selected\r\n    if (buttonElement.classList.contains(\"selected\")) {\r\n        // Deselect the button\r\n        buttonElement.classList.remove(\"selected\");\r\n        // Reset the selected lunch type\r\n        selectedLunchType = null;\r\n    } else {\r\n        // If another button was previously selected, deselect it\r\n        allLunchButtons.forEach(btn => btn.classList.remove(\"selected\"));\r\n\r\n        // Mark the clicked button as selected\r\n        buttonElement.classList.add(\"selected\");\r\n        // Set the selected lunch type\r\n        selectedLunchType = lunchType;\r\n    }\r\n\r\n    // Update the period to reflect the changes\r\n    manualNavigation = true;\r\n    updatePeriod();\r\n}\r\n\r\n\r\n\r\n/**\r\n * updates the current time and countdown timer\r\n */\r\nfunction updateClock() {\r\n    now = new Date();\r\n    let timeRemaining;\r\n\r\n    // If it's not school hours\r\n    if (currentPeriodIndex === -1) {\r\n        let [firstStartHours, firstStartMinutes] = timePeriodMapping[0].startTime.split(\":\").map(Number);\r\n        let firstStartTime = new Date(now);\r\n        firstStartTime.setHours(firstStartHours, firstStartMinutes, 0, 0);\r\n\r\n        // If the time has passed for today, set for next day\r\n        if (now > firstStartTime) {\r\n            firstStartTime.setDate(firstStartTime.getDate() + 1);\r\n        }\r\n\r\n        timeRemaining = (firstStartTime - now) / 1000; // in seconds\r\n    }\r\n    // Otherwise, it's a regular school period or passing period\r\n    else {\r\n        timeRemaining = (endTime - now) / 1000; // in seconds\r\n    }\r\n\r\n    // Reset hasAdvanced flag if the time is not yet expired\r\n    if (timeRemaining > 1) {\r\n        hasAdvanced = false;\r\n    }\r\n\r\n    if (timeRemaining <= 1 && !hasAdvanced && !manualNavigation) {\r\n        // ... (existing logic to advance the period)\r\n        advanceToNextPeriod();\r\n        hasAdvanced = true;\r\n    }\r\n\r\n    // If the time has already expired and it's a manual navigation\r\n    if (timeRemaining <= 1 && manualNavigation) {\r\n        endTime.setDate(endTime.getDate() + 1);\r\n        timeRemaining = (endTime - now) / 1000;\r\n        manualNavigation = false; // Reset the flag\r\n    }\r\n\r\n    console.log(manualNavigation)\r\n    console.log(hasAdvanced)\r\n\r\n    // Calculate hours, minutes, seconds\r\n    let hours = Math.floor(timeRemaining / 3600);\r\n    timeRemaining %= 3600;\r\n    let minutes = Math.floor(timeRemaining / 60);\r\n    let seconds = Math.floor(timeRemaining % 60);\r\n\r\n    // Display time\r\n    if (hours > 0) {\r\n        countdown.textContent = `${hours}:${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\r\n    } else {\r\n        countdown.textContent = `${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\r\n    }\r\n\r\n    // Update the progress bar\r\n    let currentPeriodMapping = timePeriodMapping[currentPeriodIndex];\r\n    if (currentPeriodMapping) {\r\n        let [startHours, startMinutes] = currentPeriodMapping.startTime.split(\":\").map(Number);\r\n        let periodStartTime = new Date(now);\r\n        periodStartTime.setHours(startHours, startMinutes, 0, 0);\r\n        updateProgressBar(periodStartTime, endTime);\r\n    }\r\n}\r\n\r\n\r\n// main loop\r\nfunction tick() {\r\n    updateClock();\r\n    requestAnimationFrame(tick);\r\n}\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", initializeCountdown);\r\n"]}